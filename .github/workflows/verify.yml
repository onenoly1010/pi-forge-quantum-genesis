name: Auto-Verify Repo
on: [push, pull_request]

permissions:
  contents: read

jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: Install dependencies
        run: |
          pip install requests
      
      - name: Check Python syntax
        run: |
          python -m py_compile verify_production.py
          python -m py_compile verify_server.py
          python -m py_compile verify_tracing.py
          echo "‚úÖ Python syntax check passed"
      
      - name: Check landing page
        run: |
          if [ -f "index.html" ]; then
            echo "‚úÖ Landing page present"
          else
            echo "‚ùå Missing index.html"
            exit 1
          fi
      
      - name: Check TypeScript config
        run: |
          if [ -f "tsconfig.json" ]; then
            echo "‚úÖ TypeScript config present"
          else
            echo "‚ùå Missing tsconfig.json"
            exit 1
          fi
      
      - name: Check package.json
        run: |
          if [ -f "package.json" ]; then
            echo "‚úÖ package.json present"
            # Check for dependencies section
            if grep -q '"dependencies"' package.json || grep -q '"devDependencies"' package.json; then
              echo "‚úÖ Dependencies section configured"
            else
              echo "‚ö†Ô∏è No dependencies sections found"
            fi
          else
            echo "‚ùå Missing package.json"
            exit 1
          fi
      
      - name: Verification Summary
        run: |
          echo ""
          echo "üöÄ Pi Forge Quantum Genesis: VERIFICATION COMPLETE"
          echo "=================================================="
          echo "‚úÖ Python files: syntax valid"
          echo "‚úÖ Landing page: present"
          echo "‚úÖ TypeScript config: present"
          echo "‚úÖ Package config: present"
          echo ""
          echo "üåå Quantum Resonance Lattice: FULLY OPERATIONAL"
